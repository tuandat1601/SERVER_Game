import{Y as l,k as r,v as h,b0 as B,O as H,N as K,m as P,aQ as g,ae as Q,at as u,aR as j,e as J,h as X}from"./index-bd88d923.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-12360f4c.js";import{a as D,b as ee,g as te}from"./game-c13a10d3.js";import{z as re}from"./index.esm-cdf23848.js";import"./index-8426971e.js";import"./hooks-7977e933.js";function ue(i){const t=l({gameId:1,serverid:1,roleid:"",shopid:0,num:0,time:0,key:""}),c=r(),v=r([]),d=r([]),m=r([]),n=r(!0),s=r(0),y=l({total:0,pageSize:10,currentPage:1,background:!0}),S=l({newPwd:""}),b=r();r([]);const k=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"验证KEY",prop:"key",minWidth:130},{label:"服务器ID",prop:"serverId",minWidth:130},{label:"游戏id",prop:"gameId",minWidth:130},{label:"角色id",prop:"roleid",minWidth:130},{label:"商品id",prop:"shopid",minWidth:130},{label:"数量",prop:"num",minWidth:130},{label:"key",prop:"key",minWidth:130},{label:"时间",prop:"time",minWidth:130}],I=h(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]);h(()=>{var e;return(e=B())==null?void 0:e.roles});function w(e){}function R(){g({title:"错误提示！",contentRenderer:()=>J("p",null,[X("未正确选择游戏和游戏区服！")])})}function F(e="发送",a){let o=!1;if(t.serverid?(t.serverid===0||t.serverid===void 0)&&(o=!0):o=!0,t.gameId?(t.gameId===0||t.gameId===void 0)&&(o=!0):o=!0,o){R();return}g({title:`${e}充值`,props:{formInline:{key:t.key?t.key:"",serverid:t.serverid?t.serverid:0,gameId:t.gameId?t.gameId:0,roleid:t.roleid?t.roleid:"",shopid:t.shopid?t.shopid:0,num:t.num?t.num:1,time:t.time?t.time:0}},width:"46%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>Q(Z,{ref:c}),beforeSure:(_,{options:O})=>{const V=c.value.getRef(),f=O.props.formInline;function Y(){u(`您${e}了充值商品id为${f.shopid}的这条数据`,{type:"success"}),_()}V.validate(q=>{q&&(U(f),Y())})}})}function x(e=0){p(e)}function C(e){}function W(e){}function E(e){}function T(e){s.value=e.length,i.value.setAdaptive()}function L(){s.value=0,i.value.getTableRef().clearSelection()}function z(){const e=i.value.getTableRef().getSelectionRows();u(`已删除服务器为 ${j(e,"id")} 的数据`,{type:"success"}),i.value.getTableRef().clearSelection()}async function N(){n.value=!0;const{data:e}=await D();d.value=e,setTimeout(()=>{n.value=!1,p(t.gameId)},300)}async function U(e){n.value=!0;const a={key:e.key?e.key:"",serverid:e.serverid,gameId:e.gameId,roleid:e.roleid?e.roleid:"",shopid:e.shopid?e.shopid:0,num:e.num?e.num:0,time:e.time?e.time:0};await ee(a),setTimeout(()=>{n.value=!1},500)}async function $(){u("查询接口暂未开发",{type:"warning"})}async function p(e){n.value=!0;const{data:a}=await te(e);m.value=a,setTimeout(()=>{n.value=!1},500)}async function A(){}const G=e=>{e&&e.resetFields()};H(S,({newPwd:e})=>b.value=K(e)?-1:re(e).score);async function M(e){}return P(()=>{N()}),{form:t,loading:n,columns:k,dataList:v,gameDataList:d,sverDataList:m,pagination:y,buttonClass:I,selectedNum:s,onSearch:A,queryEmail:$,onSendEmail:F,onbatchDel:z,handleRole:M,resetForm:G,handleUpdate:w,handleDelete:C,onSelectionGame:x,handleSizeChange:W,onSelectionCancel:L,handleCurrentChange:E,handleSelectionChange:T}}export{ue as useUser};
