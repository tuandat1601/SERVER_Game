import{Y as I,k as l,v as q,O as B,N as H,m as J,aQ as V,ae as X,G as m,at as v,aR as Z}from"./index-bd88d923.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-40018d38.js";import{k as g,a as D}from"./game-c13a10d3.js";import{z as w}from"./index.esm-cdf23848.js";import"./index-8426971e.js";import"./hooks-142968e5.js";let y;function ce(d){const p=I({channelAppId:0,gameId:1}),_=l(),x=l([]),u=l([]),c=l(!0),f=l(0),A=I({total:0,pageSize:10,currentPage:1,background:!0}),T=I({newPwd:""}),K=l();l([]);const C=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"渠道AppId",prop:"channelAppId",minWidth:130},{label:"渠道类型",prop:"channelType",minWidth:130},{label:"渠道应用名",prop:"appName",minWidth:130},{label:"渠道应用ID",prop:"appId",minWidth:130},{label:"应用Key",prop:"appKey",minWidth:130},{label:"验证密钥",prop:"serverKey",minWidth:130},{label:"用户协议",prop:"user_policy_url",minWidth:130},{label:"隐私协议",prop:"privacy_policy_url",minWidth:130},{label:"充值开关",prop:"payMentSwitch",minWidth:130},{label:"操作",fixed:"right",width:180,slot:"operation"}],N=q(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]);function M(e){}function W(e="新增",n){V({title:`${e}渠道`,props:{formInline:{title:e,channelAppId:(n==null?void 0:n.channelAppId)??0,channelType:(n==null?void 0:n.channelType)??"",appName:(n==null?void 0:n.appName)??0,appId:(n==null?void 0:n.appId)??"",appKey:(n==null?void 0:n.appKey)??"",serverKey:(n==null?void 0:n.serverKey)??"",notice:(n==null?void 0:n.notice)??[],user_policy_url:(n==null?void 0:n.user_policy_url)??"",privacy_policy_url:(n==null?void 0:n.privacy_policy_url)??"",payMentSwitch:(n==null?void 0:n.payMentSwitch)??!0}},width:"46%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>X(E,{ref:_}),beforeSure:(a,{options:t})=>{const s=_.value.getRef(),o=t.props.formInline;function b(){v(`您${e}了渠道名为${o.appName}的这条数据`,{type:"success"}),a(),setTimeout(()=>{i()},500)}s.validate(j=>{j&&(e==="新增"?(R(o),b()):(k(o,n.channelAppId),b()))})}})}function h(e,n){for(let a=0;a<n.length;a++){const t=n[a];if(e===t.id)return a}return 0}function S(e,n){for(let a=0;a<n.length;a++){const t=n[a];if(e===t.channelAppId)return a}return 0}function R(e){const n=m(y),a={channelAppId:e.channelAppId,channelType:e.channelType,appName:e.appName,appId:e.appId,appKey:e.appKey,serverKey:e.serverKey,notice:e.notice,user_policy_url:e.channelType,privacy_policy_url:e.channelType,payMentSwitch:e.channelType},t=h(p.gameId,n);n[t].channels.push(a),g(n[t]),r()}function k(e,n){const a=m(y),t={channelAppId:e.channelAppId,channelType:e.channelType,appName:e.appName,appId:e.appId,appKey:e.appKey,serverKey:e.serverKey,notice:e.notice,user_policy_url:e.user_policy_url,privacy_policy_url:e.privacy_policy_url,payMentSwitch:e.payMentSwitch},s=h(p.gameId,a),o=S(p.channelAppId,a[s].channels);a[s].channels[o]=t,g(a[s]),r()}function G(e){const n=m(y),a=h(p.gameId,n),t=S(p.channelAppId,n[a].channels);n[a].channels[t],g(n[a]),r()}function $(e){v(`您删除了渠道名为${e.name}的这条数据`,{type:"success"}),G(e.channelAppId),i()}function z(e){}function F(e){}function L(e){f.value=e.length,d.value.setAdaptive()}function O(){f.value=0,d.value.getTableRef().clearSelection()}function U(){const e=d.value.getTableRef().getSelectionRows();v(`已删除服务器为 ${Z(e,"id")} 的数据`,{type:"success"}),d.value.getTableRef().clearSelection()}async function i(){c.value=!0;const e=h(p.gameId,u.value);x.value=u.value[e].channels,setTimeout(()=>{c.value=!1},500)}async function r(){c.value=!0;const{data:e}=await D();y=m(e),u.value=e,setTimeout(()=>{c.value=!1,i()},500)}async function P(){}const Q=e=>{e&&(e.resetFields(),i())};B(T,({newPwd:e})=>K.value=H(e)?-1:w(e).score);async function Y(e){}return J(()=>{r()}),{form:p,loading:c,columns:C,dataList:x,gameDataList:u,pagination:A,buttonClass:N,selectedNum:f,onSearch:P,onAddGame:W,onbatchDel:U,handleRole:Y,resetForm:Q,onChannelSearch:i,handleUpdate:M,handleDelete:$,handleSizeChange:z,onSelectionCancel:O,handleCurrentChange:F,handleSelectionChange:L}}export{ce as useUser};
