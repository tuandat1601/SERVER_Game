import{Y as T,k as o,v as q,O as B,N as J,m as X,e as g,w as Z,b as E,F as w,r as O,aU as U,aQ as D,ae as F,at as v,aR as ee}from"./index-bd88d923.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-c078f65a.js";import{_ as te}from"./index_auto.vue_vue_type_script_setup_true_lang-8b099e02.js";import{o as ne,l as ie,m as le,n as oe,a as se,f as ce}from"./game-c13a10d3.js";import{z as ue}from"./index.esm-cdf23848.js";import"./index-8426971e.js";import"./rule-435d4b2a.js";import"./hooks-142968e5.js";function ye(r){const R=T({id:1,name:"",secretkey:"",sku:"",serverNF:"",gameUrl:"",autoOpenModel:!1,autoVal:0,autoTime:"",chatIPs:[],user_policy_url:"",privacy_policy_url:"",channelAppId:0,channelType:"",appName:0,appId:"",appKey:"",serverKey:"",noticeName:"",noticeRank:0,noticeDec:""}),d=o(),M=o([]),V=o([]),c=o(!0),y=o(0),S=T({total:0,pageSize:10,currentPage:1,background:!0}),C=T({newPwd:""}),N=o();o([]);const _=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"序号",prop:"id",minWidth:130},{label:"游戏名",prop:"name",minWidth:130},{label:"验证密钥",prop:"secretkey",minWidth:130},{label:"服务器模版",prop:"serverNF",minWidth:130},{label:"标识",prop:"sku",minWidth:130},{label:"游戏节点URL",prop:"gameUrl",minWidth:130,cellRenderer:({row:a})=>g(O("el-popover"),{effect:"light",trigger:"hover",placement:"top",width:"auto"},{default:()=>Z(g("div",{class:"node-item dark:text-bg_color"},[g(w,null,[a.gameUrl])]),[[E("for"),"(item, index) in row.gameUrl"]]),reference:()=>g(O("el-tag"),null,{default:()=>[a.gameUrl.length>1?a.gameUrl[0]+" ...":a.gameUrl[0]]})})},{label:"创建时间",prop:"createdAt",minWidth:130,formatter:({createdAt:a})=>U(a).format("YYYY-MM-DD HH:mm:ss")},{label:"更新时间",prop:"updatedAt",minWidth:130,formatter:({updatedAt:a})=>U(a).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:180,slot:"operation"}],x=q(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]);function P(a){}function b(a){const e=[];if(a&&a.length>0){if(a.includes(","))return a.split(",");if(a.includes(";"))return a.split(";");if(a.includes("，"))return a.split("，");if(a.includes("；"))return a.split("；");e.push(a)}return e}function Y(a="新增",e){var u,f,m;D({title:`${a}游戏自动开服`,props:{formInline:{title:a,id:(e==null?void 0:e.id)??0,name:(e==null?void 0:e.name)??"",secretkey:(e==null?void 0:e.secretkey)??"",sku:(e==null?void 0:e.sku)??"",serverNF:(e==null?void 0:e.serverNF)??"",gameUrl:(e==null?void 0:e.gameUrl)??"",autoOpenModel:((u=e&&e.info)==null?void 0:u.autoOpenModel)??!1,autoVal:((f=e&&e.info)==null?void 0:f.autoVal)??0,autoTime:((m=e&&e.info)==null?void 0:m.autoTime)??""}},width:"46%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>F(te,{ref:d}),beforeSure:(p,{options:k})=>{const I=d.value.getRef(),n=k.props.formInline;function t(){v(`您${a}了游戏名称为${n.name}的这条数据`,{type:"success"}),p(),setTimeout(()=>{s()},500)}I.validate(h=>{if(h&&a!=="新增"){const l={};l.autoOpenModel=n.info?n.info.autoOpenModel:!1,l.autoVal=n.info?n.info.autoVal:0,l.autoTime=n.info?n.info.autoTime:"",l.chatIPs=b(n.chatIPs),n.info=l,ne(e.id,n),t()}})}})}function $(a="新增",e){var u,f,m,p;D({title:`${a}游戏`,props:{formInline:{title:a,id:(e==null?void 0:e.id)??0,name:(e==null?void 0:e.name)??"",secretkey:(e==null?void 0:e.secretkey)??"",sku:(e==null?void 0:e.sku)??"",serverNF:(e==null?void 0:e.serverNF)??"",gameUrl:(e==null?void 0:e.gameUrl)??"",autoOpenModel:((u=e&&e.info)==null?void 0:u.autoOpenModel)??!1,autoVal:((f=e&&e.info)==null?void 0:f.autoVal)??0,autoTime:((m=e&&e.info)==null?void 0:m.autoTime)??"",chatIPs:((p=e&&e.info)==null?void 0:p.chatIPs)??[]}},width:"46%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>F(ae,{ref:d}),beforeSure:(k,{options:I})=>{const n=d.value.getRef(),t=I.props.formInline;function h(){v(`您${a}了游戏名称为${t.name}的这条数据`,{type:"success"}),k(),setTimeout(()=>{s()},500)}n.validate(l=>{if(l)if(a==="新增"){const i={};i.autoOpenModel=t.info?t.info.autoOpenModel:!1,i.autoVal=t.info?t.info.autoVal:0,i.autoTime=t.info?t.info.autoTime:"",i.chatIPs=b(t.chatIPs),t.info=i,ie(t),h()}else{const i={};i.autoOpenModel=t.info?t.info.autoOpenModel:!1,i.autoVal=t.info?t.info.autoVal:0,i.autoTime=t.info?t.info.autoTime:"",i.chatIPs=b(t.chatIPs),t.info=i,le(t),h()}})}})}function A(a){v(`您删除了游戏为${a.name}的这条数据`,{type:"success"}),oe(a.id),s()}function W(a){}function G(a){}function L(a){y.value=a.length,r.value.setAdaptive()}function z(){y.value=0,r.value.getTableRef().clearSelection()}function H(){const a=r.value.getTableRef().getSelectionRows();v(`已删除游戏为 ${ee(a,"id")} 的数据`,{type:"success"}),r.value.getTableRef().clearSelection()}async function s(){c.value=!0;const{data:a}=await se();M.value=a,S.total=a.total?a.total:0,setTimeout(()=>{c.value=!1},500)}async function K(){c.value=!0;const{data:a}=await ce();V.value=a,setTimeout(()=>{c.value=!1},500)}const j=a=>{a&&(a.resetFields(),s())};B(C,({newPwd:a})=>N.value=J(a)?-1:ue(a).score);async function Q(a){}return X(()=>{s(),K()}),{form:R,loading:c,columns:_,dataList:M,pagination:S,buttonClass:x,selectedNum:y,onSearch:s,onAddGame:$,onbatchDel:H,handleRole:Q,resetForm:j,handleUpdate:P,handleDelete:A,onAutoSvrGame:Y,handleSizeChange:W,onSelectionCancel:z,handleCurrentChange:G,handleSelectionChange:L}}export{ye as useUser};
