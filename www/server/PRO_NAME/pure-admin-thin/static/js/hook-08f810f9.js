import{Y as u,k as n,v as W,O as _,N as A,m as N,aQ as O,ae as G,at as d,aR as P}from"./index-bd88d923.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-3f9c63b1.js";import{c as Y,d as j,e as q,f as B}from"./game-c13a10d3.js";import{z as H}from"./index.esm-cdf23848.js";import"./index-8426971e.js";import"./hooks-142968e5.js";function w(c){const g=u({name:"",remark:"",checkUrl:""}),m=n(),f=n([]),o=n(!0),r=n(0),h=u({total:0,pageSize:10,currentPage:1,background:!0}),v=u({newPwd:""}),k=n();n([]);const S=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"渠道名",prop:"name",minWidth:130},{label:"渠道序号",prop:"remark",minWidth:130},{label:"checkUrl",prop:"checkUrl",minWidth:130},{label:"操作",fixed:"right",width:180,slot:"operation"}],b=W(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]);function C(e){}function x(e){const t=[];for(const s in e){const l=e[s];t.push(l)}return t}function y(e="新增",t){O({title:`${e}渠道`,props:{formInline:{title:e,name:(t==null?void 0:t.name)??"",remark:(t==null?void 0:t.remark)??"",checkUrl:(t==null?void 0:t.checkUrl)??""}},width:"46%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>G(Q,{ref:m}),beforeSure:(s,{options:l})=>{const L=m.value.getRef(),i=l.props.formInline;function p(){d(`您${e}了渠道名为${i.name}的这条数据`,{type:"success"}),s(),a()}L.validate(M=>{M&&(e==="新增"?(Y(i),p()):(j(i),p()))})}})}function R(e){d(`您删除了渠道名为${e.name}的这条数据`,{type:"success"}),q(e.id),a()}function U(e){}function D(e){}function $(e){r.value=e.length,c.value.setAdaptive()}function z(){r.value=0,c.value.getTableRef().clearSelection()}function F(){const e=c.value.getTableRef().getSelectionRows();d(`已删除服务器为 ${P(e,"id")} 的数据`,{type:"success"}),c.value.getTableRef().clearSelection()}async function a(){o.value=!0;const{data:e}=await B();f.value=x(e),h.total=e.total?e.total:1,setTimeout(()=>{o.value=!1},500)}const T=e=>{e&&(e.resetFields(),a())};_(v,({newPwd:e})=>k.value=A(e)?-1:H(e).score);async function I(e){}return N(()=>{a()}),{form:g,loading:o,columns:S,dataList:f,pagination:h,buttonClass:b,selectedNum:r,onSearch:a,onAddGame:y,onbatchDel:F,handleRole:I,resetForm:T,handleUpdate:C,handleDelete:R,handleSizeChange:U,onSelectionCancel:z,handleCurrentChange:D,handleSelectionChange:$}}export{w as useUser};
