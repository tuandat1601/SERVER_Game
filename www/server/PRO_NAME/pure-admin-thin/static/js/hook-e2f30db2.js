import{Y as R,k as u,m as S,e as Y,r as H,aU as M,N as p,aS as T,aQ as W,G as $,ae as C,at as o}from"./index-bd88d923.js";import{_ as F}from"./form.vue_vue_type_script_setup_true_lang-42de678d.js";import{u as O}from"./hooks-4c4a002a.js";import"./index-8426971e.js";function j(){const n=R({name:"",status:null}),c=u(),l=u([]),i=u(!0),{tagStyle:r}=O(),d=[{label:"部门名称",prop:"name",width:180,align:"left"},{label:"排序",prop:"sort",minWidth:70},{label:"状态",prop:"status",minWidth:100,cellRenderer:({row:a,props:e})=>Y(H("el-tag"),{size:e.size,style:r.value(a.status)},{default:()=>[a.status===1?"启用":"停用"]})},{label:"创建时间",minWidth:200,prop:"createTime",formatter:({createTime:a})=>M(a).format("YYYY-MM-DD HH:mm:ss")},{label:"备注",prop:"remark",minWidth:320},{label:"操作",fixed:"right",width:160,slot:"operation"}];function h(a){}function g(a){a&&(a.resetFields(),s())}async function s(){i.value=!0;const{data:a}=null;let e=a;p(n.name)||(e=e.filter(t=>t.name.includes(n.name))),p(n.status)||(e=e.filter(t=>t.status===n.status)),l.value=T(e),setTimeout(()=>{i.value=!1},500)}function m(a){if(!a||!a.length)return;const e=[];for(let t=0;t<a.length;t++)a[t].disabled=a[t].status===0,m(a[t].children),e.push(a[t]);return e}function b(a="新增",e){W({title:`${a}部门`,props:{formInline:{higherDeptOptions:m($(l.value)),parentId:(e==null?void 0:e.parentId)??0,name:(e==null?void 0:e.name)??"",principal:(e==null?void 0:e.principal)??"",phone:(e==null?void 0:e.phone)??"",email:(e==null?void 0:e.email)??"",sort:(e==null?void 0:e.sort)??0,status:(e==null?void 0:e.status)??1,remark:(e==null?void 0:e.remark)??""}},width:"40%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>C(F,{ref:c}),beforeSure:(t,{options:D})=>{const k=c.value.getRef(),y=D.props.formInline;function f(){o(`您${a}了部门名称为${y.name}的这条数据`,{type:"success"}),t(),s()}k.validate(I=>{I&&f()})}})}function v(a){o(`您删除了部门名称为${a.name}的这条数据`,{type:"success"}),s()}return S(()=>{s()}),{form:n,loading:i,columns:d,dataList:l,onSearch:s,resetForm:g,openDialog:b,handleDelete:v,handleSelectionChange:h}}export{j as useDept};
