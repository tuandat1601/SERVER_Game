import{Y as h,k as a,v as A,O as E,N as O,m as U,aQ as B,ae as P,at as i,aR as Q}from"./index-bd88d923.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-b5c3e017.js";import{b as j,u as q,c as H,k as J}from"./operations-67cacc8a.js";import{a as K}from"./game-c13a10d3.js";import{z as V}from"./index.esm-cdf23848.js";import{u as g,w as X}from"./xlsx-f5126985.js";import"./index-8426971e.js";import"./hooks-f0d9bd8c.js";function le(u){const v=h({gameId:1,arpu:0,today_amount:0,today_user:0,total_amount:0,total_user:0}),_=a(),d=a([]),y=a([]),n=a(!0),m=a(0),b=h({total:0,pageSize:10,currentPage:1,background:!0}),S=h({newPwd:""}),k=a();a([]);const p=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"总注册用户",prop:"total_user",minWidth:130},{label:"今日注册用户",prop:"today_user",minWidth:130},{label:"总充值",prop:"total_amount",minWidth:130},{label:"今日充值",prop:"today_amount",minWidth:130},{label:"arpu",prop:"arpu",minWidth:130}],x=A(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]);function C(e){}function D(e="新增",t){B({title:`${e}激活码`,props:{formInline:{title:e,arpu:(t==null?void 0:t.arpu)??0,today_amount:(t==null?void 0:t.today_amount)??0,today_user:(t==null?void 0:t.today_user)??0,total_amount:(t==null?void 0:t.total_amount)??0,total_user:(t==null?void 0:t.total_user)??0}},width:"46%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>P(Y,{ref:_}),beforeSure:(f,{options:c})=>{const l=_.value.getRef(),o=c.props.formInline;function r(){i(`您${e}了激活码名为${o.codeName}的这条数据`,{type:"success"}),f(),s()}l.validate(M=>{M&&(e==="新增"?(j(o),r()):(q(o),r()))})}})}const R=()=>{const e=d.value.map(l=>{const o=[];return p.forEach(r=>{o.push(l[r.prop])}),o}),t=[];p.forEach(l=>{t.push(l.label)}),e.unshift(t);const f=g.aoa_to_sheet(e),c=g.book_new();g.book_append_sheet(c,f,"数据报表"),X(c,"realtime-table.xlsx"),i("导出成功",{type:"success"})};function F(e){i(`您删除了arpu为${e.arpu}的这条数据`,{type:"success"}),H(e),s()}function T(e){}function W(e){}function $(e){m.value=e.length,u.value.setAdaptive()}function z(){m.value=0,u.value.getTableRef().clearSelection()}function I(){const e=u.value.getTableRef().getSelectionRows();i(`已删除服务器为 ${Q(e,"codeName")} 的数据`,{type:"success"}),u.value.getTableRef().clearSelection()}async function L(){n.value=!0;const{data:e}=await K();y.value=e,setTimeout(()=>{n.value=!1},500)}async function s(){n.value=!0;const{data:e}=await J(v);d.value=[e],b.total=e.total?e.total:1,setTimeout(()=>{n.value=!1},500)}const N=e=>{e&&(e.resetFields(),s())};E(S,({newPwd:e})=>k.value=O(e)?-1:V(e).score);async function G(e){}return U(()=>{L(),s()}),{form:v,loading:n,columns:p,dataList:d,gameDataList:y,pagination:b,buttonClass:x,selectedNum:m,onSearch:s,onAddGame:D,onbatchDel:I,handleRole:G,resetForm:N,exportExcel:R,handleUpdate:C,handleDelete:F,handleSizeChange:T,onSelectionCancel:z,handleCurrentChange:W,handleSelectionChange:$}}export{le as useUser};
